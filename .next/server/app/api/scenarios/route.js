"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/scenarios/route";
exports.ids = ["app/api/scenarios/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscenarios%2Froute&page=%2Fapi%2Fscenarios%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscenarios%2Froute.js&appDir=C%3A%5CProjects%5Crenew-pyth%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CProjects%5Crenew-pyth&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscenarios%2Froute&page=%2Fapi%2Fscenarios%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscenarios%2Froute.js&appDir=C%3A%5CProjects%5Crenew-pyth%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CProjects%5Crenew-pyth&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Projects_renew_pyth_app_api_scenarios_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/scenarios/route.js */ \"(rsc)/./app/api/scenarios/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/scenarios/route\",\n        pathname: \"/api/scenarios\",\n        filename: \"route\",\n        bundlePath: \"app/api/scenarios/route\"\n    },\n    resolvedPagePath: \"C:\\\\Projects\\\\renew-pyth\\\\app\\\\api\\\\scenarios\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Projects_renew_pyth_app_api_scenarios_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/scenarios/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzY2VuYXJpb3MlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnNjZW5hcmlvcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnNjZW5hcmlvcyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDUHJvamVjdHMlNUNyZW5ldy1weXRoJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDUHJvamVjdHMlNUNyZW5ldy1weXRoJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNPO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVuZXdhYmxlYXNzZXRzLW5leHRqcy8/NDIxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxQcm9qZWN0c1xcXFxyZW5ldy1weXRoXFxcXGFwcFxcXFxhcGlcXFxcc2NlbmFyaW9zXFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zY2VuYXJpb3Mvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zY2VuYXJpb3NcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3NjZW5hcmlvcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFByb2plY3RzXFxcXHJlbmV3LXB5dGhcXFxcYXBwXFxcXGFwaVxcXFxzY2VuYXJpb3NcXFxccm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3NjZW5hcmlvcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscenarios%2Froute&page=%2Fapi%2Fscenarios%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscenarios%2Froute.js&appDir=C%3A%5CProjects%5Crenew-pyth%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CProjects%5Crenew-pyth&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/scenarios/route.js":
/*!************************************!*\
  !*** ./app/api/scenarios/route.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(rsc)/./lib/mongodb.js\");\n// app/api/scenarios/route.js\n\n\nasync function GET(request) {\n    try {\n        const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n        const db = client.db(\"energy_contracts\");\n        const { searchParams } = new URL(request.url);\n        const type = searchParams.get(\"type\") || \"all\" // 'base', 'sensitivity', 'all'\n        ;\n        // Get base case scenarios from main collection\n        const mainCollection = db.collection(\"ASSET_cash_flows\");\n        const sensCollection = db.collection(\"SENS_Asset_Outputs\");\n        let scenarios = [];\n        if (type === \"all\" || type === \"base\") {\n            // Get base case scenarios\n            const baseScenarios = await mainCollection.distinct(\"scenario_id\");\n            for (let scenarioId of baseScenarios){\n                const scenarioStats = await mainCollection.aggregate([\n                    {\n                        $match: {\n                            scenario_id: scenarioId\n                        }\n                    },\n                    {\n                        $group: {\n                            _id: null,\n                            totalRevenue: {\n                                $sum: \"$revenue\"\n                            },\n                            totalCapex: {\n                                $sum: \"$capex\"\n                            },\n                            totalEquityCashFlow: {\n                                $sum: \"$equity_cash_flow\"\n                            },\n                            recordCount: {\n                                $sum: 1\n                            },\n                            minDate: {\n                                $min: \"$date\"\n                            },\n                            maxDate: {\n                                $max: \"$date\"\n                            },\n                            uniqueAssets: {\n                                $addToSet: \"$asset_id\"\n                            }\n                        }\n                    }\n                ]).toArray();\n                const stats = scenarioStats[0] || {};\n                scenarios.push({\n                    scenarioId: scenarioId || \"base_case\",\n                    name: scenarioId || \"Base Case\",\n                    type: \"base\",\n                    description: \"Base case financial model\",\n                    stats: {\n                        totalRevenue: stats.totalRevenue || 0,\n                        totalCapex: stats.totalCapex || 0,\n                        totalEquityCashFlow: stats.totalEquityCashFlow || 0,\n                        recordCount: stats.recordCount || 0,\n                        assetCount: stats.uniqueAssets?.length || 0,\n                        dateRange: {\n                            start: stats.minDate,\n                            end: stats.maxDate\n                        }\n                    }\n                });\n            }\n        }\n        if (type === \"all\" || type === \"sensitivity\") {\n            // Get sensitivity scenarios\n            const sensitivityScenarios = await sensCollection.distinct(\"scenario_id\");\n            for (let scenarioId of sensitivityScenarios){\n                const scenarioStats = await sensCollection.aggregate([\n                    {\n                        $match: {\n                            scenario_id: scenarioId\n                        }\n                    },\n                    {\n                        $group: {\n                            _id: null,\n                            totalRevenue: {\n                                $sum: \"$revenue\"\n                            },\n                            totalCapex: {\n                                $sum: \"$capex\"\n                            },\n                            totalEquityCashFlow: {\n                                $sum: \"$equity_cash_flow\"\n                            },\n                            recordCount: {\n                                $sum: 1\n                            },\n                            minDate: {\n                                $min: \"$date\"\n                            },\n                            maxDate: {\n                                $max: \"$date\"\n                            },\n                            uniqueAssets: {\n                                $addToSet: \"$asset_id\"\n                            }\n                        }\n                    }\n                ]).toArray();\n                const stats = scenarioStats[0] || {};\n                // Parse scenario parameters from scenario_id\n                const scenarioParams = parseScenarioId(scenarioId);\n                scenarios.push({\n                    scenarioId: scenarioId,\n                    name: scenarioParams.name,\n                    type: \"sensitivity\",\n                    parameter: scenarioParams.parameter,\n                    value: scenarioParams.value,\n                    description: scenarioParams.description,\n                    stats: {\n                        totalRevenue: stats.totalRevenue || 0,\n                        totalCapex: stats.totalCapex || 0,\n                        totalEquityCashFlow: stats.totalEquityCashFlow || 0,\n                        recordCount: stats.recordCount || 0,\n                        assetCount: stats.uniqueAssets?.length || 0,\n                        dateRange: {\n                            start: stats.minDate,\n                            end: stats.maxDate\n                        }\n                    }\n                });\n            }\n        }\n        // Sort scenarios\n        scenarios.sort((a, b)=>{\n            if (a.type === \"base\" && b.type === \"sensitivity\") return -1;\n            if (a.type === \"sensitivity\" && b.type === \"base\") return 1;\n            return a.name.localeCompare(b.name);\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            scenarios: scenarios,\n            count: scenarios.length,\n            types: {\n                base: scenarios.filter((s)=>s.type === \"base\").length,\n                sensitivity: scenarios.filter((s)=>s.type === \"sensitivity\").length\n            }\n        });\n    } catch (error) {\n        console.error(\"Scenarios API error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch scenarios\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\nfunction parseScenarioId(scenarioId) {\n    // Parse scenario IDs like \"sensitivity_results_electricity_price_-5.0000\"\n    if (!scenarioId || !scenarioId.startsWith(\"sensitivity_results_\")) {\n        return {\n            name: scenarioId || \"Unknown Scenario\",\n            parameter: \"unknown\",\n            value: null,\n            description: \"Unknown scenario\"\n        };\n    }\n    const parts = scenarioId.split(\"_\");\n    if (parts.length >= 4) {\n        // Handle multi-word parameters like 'electricity_price'\n        const paramParts = parts.slice(2, -1) // Everything except prefix and last value\n        ;\n        const valuePart = parts[parts.length - 1];\n        const parameter = paramParts.join(\"_\");\n        try {\n            const value = parseFloat(valuePart);\n            const parameterDisplayNames = {\n                \"electricity_price\": \"Electricity Price\",\n                \"green_price\": \"Green Certificate Price\",\n                \"volume\": \"Generation Volume\",\n                \"capex\": \"CAPEX\",\n                \"opex\": \"OPEX\",\n                \"interest_rate\": \"Interest Rate\",\n                \"terminal_value\": \"Terminal Value\"\n            };\n            const displayName = parameterDisplayNames[parameter] || parameter.replace(/_/g, \" \");\n            let description = `${displayName} scenario`;\n            if (value > 0) {\n                description += ` (+${value})`;\n            } else if (value < 0) {\n                description += ` (${value})`;\n            }\n            return {\n                name: `${displayName} ${value > 0 ? \"+\" : \"\"}${value}`,\n                parameter: parameter,\n                value: value,\n                description: description\n            };\n        } catch  {\n        // Value parsing failed\n        }\n    }\n    return {\n        name: scenarioId.replace(/^sensitivity_results_/, \"\").replace(/_/g, \" \"),\n        parameter: \"unknown\",\n        value: null,\n        description: \"Sensitivity scenario\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRLEdBQUc7Z0JBQ2JWLGVBQWUsQ0FBQyxHQUFHLEVBQUVVLE1BQU0sQ0FBQyxDQUFDO1lBQy9CLE9BQU8sSUFBSUEsUUFBUSxHQUFHO2dCQUNwQlYsZUFBZSxDQUFDLEVBQUUsRUFBRVUsTUFBTSxDQUFDLENBQUM7WUFDOUI7WUFFQSxPQUFPO2dCQUNMWCxNQUFNLENBQUMsRUFBRXFDLFlBQVksQ0FBQyxFQUFFMUIsUUFBUSxJQUFJLE1BQU0sR0FBRyxFQUFFQSxNQUFNLENBQUM7Z0JBQ3RERCxXQUFXQTtnQkFDWEMsT0FBT0E7Z0JBQ1BWLGFBQWFBO1lBQ2Y7UUFDRixFQUFFLE9BQU07UUFDTix1QkFBdUI7UUFDekI7SUFDRjtJQUVBLE9BQU87UUFDTEQsTUFBTXJCLFdBQVcyRCxPQUFPLENBQUMseUJBQXlCLElBQUlBLE9BQU8sQ0FBQyxNQUFNO1FBQ3BFNUIsV0FBVztRQUNYQyxPQUFPO1FBQ1BWLGFBQWE7SUFDZjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVuZXdhYmxlYXNzZXRzLW5leHRqcy8uL2FwcC9hcGkvc2NlbmFyaW9zL3JvdXRlLmpzP2VhNjYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYXBwL2FwaS9zY2VuYXJpb3Mvcm91dGUuanNcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IGNsaWVudFByb21pc2UgZnJvbSAnLi4vLi4vLi4vbGliL21vbmdvZGInXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGNsaWVudFByb21pc2VcbiAgICBjb25zdCBkYiA9IGNsaWVudC5kYihwcm9jZXNzLmVudi5NT05HT0RCX0RCKVxuICAgIFxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IHR5cGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCd0eXBlJykgfHwgJ2FsbCcgLy8gJ2Jhc2UnLCAnc2Vuc2l0aXZpdHknLCAnYWxsJ1xuICAgIFxuICAgIC8vIEdldCBiYXNlIGNhc2Ugc2NlbmFyaW9zIGZyb20gbWFpbiBjb2xsZWN0aW9uXG4gICAgY29uc3QgbWFpbkNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKCdBU1NFVF9jYXNoX2Zsb3dzJylcbiAgICBjb25zdCBzZW5zQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ1NFTlNfQXNzZXRfT3V0cHV0cycpXG4gICAgXG4gICAgbGV0IHNjZW5hcmlvcyA9IFtdXG4gICAgXG4gICAgaWYgKHR5cGUgPT09ICdhbGwnIHx8IHR5cGUgPT09ICdiYXNlJykge1xuICAgICAgLy8gR2V0IGJhc2UgY2FzZSBzY2VuYXJpb3NcbiAgICAgIGNvbnN0IGJhc2VTY2VuYXJpb3MgPSBhd2FpdCBtYWluQ29sbGVjdGlvbi5kaXN0aW5jdCgnc2NlbmFyaW9faWQnKVxuICAgICAgXG4gICAgICBmb3IgKGxldCBzY2VuYXJpb0lkIG9mIGJhc2VTY2VuYXJpb3MpIHtcbiAgICAgICAgY29uc3Qgc2NlbmFyaW9TdGF0cyA9IGF3YWl0IG1haW5Db2xsZWN0aW9uLmFnZ3JlZ2F0ZShbXG4gICAgICAgICAgeyAkbWF0Y2g6IHsgc2NlbmFyaW9faWQ6IHNjZW5hcmlvSWQgfSB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICRncm91cDoge1xuICAgICAgICAgICAgICBfaWQ6IG51bGwsXG4gICAgICAgICAgICAgIHRvdGFsUmV2ZW51ZTogeyAkc3VtOiAnJHJldmVudWUnIH0sXG4gICAgICAgICAgICAgIHRvdGFsQ2FwZXg6IHsgJHN1bTogJyRjYXBleCcgfSxcbiAgICAgICAgICAgICAgdG90YWxFcXVpdHlDYXNoRmxvdzogeyAkc3VtOiAnJGVxdWl0eV9jYXNoX2Zsb3cnIH0sXG4gICAgICAgICAgICAgIHJlY29yZENvdW50OiB7ICRzdW06IDEgfSxcbiAgICAgICAgICAgICAgbWluRGF0ZTogeyAkbWluOiAnJGRhdGUnIH0sXG4gICAgICAgICAgICAgIG1heERhdGU6IHsgJG1heDogJyRkYXRlJyB9LFxuICAgICAgICAgICAgICB1bmlxdWVBc3NldHM6IHsgJGFkZFRvU2V0OiAnJGFzc2V0X2lkJyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdKS50b0FycmF5KClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0YXRzID0gc2NlbmFyaW9TdGF0c1swXSB8fCB7fVxuICAgICAgICBcbiAgICAgICAgc2NlbmFyaW9zLnB1c2goe1xuICAgICAgICAgIHNjZW5hcmlvSWQ6IHNjZW5hcmlvSWQgfHwgJ2Jhc2VfY2FzZScsXG4gICAgICAgICAgbmFtZTogc2NlbmFyaW9JZCB8fCAnQmFzZSBDYXNlJyxcbiAgICAgICAgICB0eXBlOiAnYmFzZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdCYXNlIGNhc2UgZmluYW5jaWFsIG1vZGVsJyxcbiAgICAgICAgICBzdGF0czoge1xuICAgICAgICAgICAgdG90YWxSZXZlbnVlOiBzdGF0cy50b3RhbFJldmVudWUgfHwgMCxcbiAgICAgICAgICAgIHRvdGFsQ2FwZXg6IHN0YXRzLnRvdGFsQ2FwZXggfHwgMCxcbiAgICAgICAgICAgIHRvdGFsRXF1aXR5Q2FzaEZsb3c6IHN0YXRzLnRvdGFsRXF1aXR5Q2FzaEZsb3cgfHwgMCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiBzdGF0cy5yZWNvcmRDb3VudCB8fCAwLFxuICAgICAgICAgICAgYXNzZXRDb3VudDogc3RhdHMudW5pcXVlQXNzZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIGRhdGVSYW5nZToge1xuICAgICAgICAgICAgICBzdGFydDogc3RhdHMubWluRGF0ZSxcbiAgICAgICAgICAgICAgZW5kOiBzdGF0cy5tYXhEYXRlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAodHlwZSA9PT0gJ2FsbCcgfHwgdHlwZSA9PT0gJ3NlbnNpdGl2aXR5Jykge1xuICAgICAgLy8gR2V0IHNlbnNpdGl2aXR5IHNjZW5hcmlvc1xuICAgICAgY29uc3Qgc2Vuc2l0aXZpdHlTY2VuYXJpb3MgPSBhd2FpdCBzZW5zQ29sbGVjdGlvbi5kaXN0aW5jdCgnc2NlbmFyaW9faWQnKVxuICAgICAgXG4gICAgICBmb3IgKGxldCBzY2VuYXJpb0lkIG9mIHNlbnNpdGl2aXR5U2NlbmFyaW9zKSB7XG4gICAgICAgIGNvbnN0IHNjZW5hcmlvU3RhdHMgPSBhd2FpdCBzZW5zQ29sbGVjdGlvbi5hZ2dyZWdhdGUoW1xuICAgICAgICAgIHsgJG1hdGNoOiB7IHNjZW5hcmlvX2lkOiBzY2VuYXJpb0lkIH0gfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAkZ3JvdXA6IHtcbiAgICAgICAgICAgICAgX2lkOiBudWxsLFxuICAgICAgICAgICAgICB0b3RhbFJldmVudWU6IHsgJHN1bTogJyRyZXZlbnVlJyB9LFxuICAgICAgICAgICAgICB0b3RhbENhcGV4OiB7ICRzdW06ICckY2FwZXgnIH0sXG4gICAgICAgICAgICAgIHRvdGFsRXF1aXR5Q2FzaEZsb3c6IHsgJHN1bTogJyRlcXVpdHlfY2FzaF9mbG93JyB9LFxuICAgICAgICAgICAgICByZWNvcmRDb3VudDogeyAkc3VtOiAxIH0sXG4gICAgICAgICAgICAgIG1pbkRhdGU6IHsgJG1pbjogJyRkYXRlJyB9LFxuICAgICAgICAgICAgICBtYXhEYXRlOiB7ICRtYXg6ICckZGF0ZScgfSxcbiAgICAgICAgICAgICAgdW5pcXVlQXNzZXRzOiB7ICRhZGRUb1NldDogJyRhc3NldF9pZCcgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXSkudG9BcnJheSgpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdGF0cyA9IHNjZW5hcmlvU3RhdHNbMF0gfHwge31cbiAgICAgICAgXG4gICAgICAgIC8vIFBhcnNlIHNjZW5hcmlvIHBhcmFtZXRlcnMgZnJvbSBzY2VuYXJpb19pZFxuICAgICAgICBjb25zdCBzY2VuYXJpb1BhcmFtcyA9IHBhcnNlU2NlbmFyaW9JZChzY2VuYXJpb0lkKVxuICAgICAgICBcbiAgICAgICAgc2NlbmFyaW9zLnB1c2goe1xuICAgICAgICAgIHNjZW5hcmlvSWQ6IHNjZW5hcmlvSWQsXG4gICAgICAgICAgbmFtZTogc2NlbmFyaW9QYXJhbXMubmFtZSxcbiAgICAgICAgICB0eXBlOiAnc2Vuc2l0aXZpdHknLFxuICAgICAgICAgIHBhcmFtZXRlcjogc2NlbmFyaW9QYXJhbXMucGFyYW1ldGVyLFxuICAgICAgICAgIHZhbHVlOiBzY2VuYXJpb1BhcmFtcy52YWx1ZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogc2NlbmFyaW9QYXJhbXMuZGVzY3JpcHRpb24sXG4gICAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICAgIHRvdGFsUmV2ZW51ZTogc3RhdHMudG90YWxSZXZlbnVlIHx8IDAsXG4gICAgICAgICAgICB0b3RhbENhcGV4OiBzdGF0cy50b3RhbENhcGV4IHx8IDAsXG4gICAgICAgICAgICB0b3RhbEVxdWl0eUNhc2hGbG93OiBzdGF0cy50b3RhbEVxdWl0eUNhc2hGbG93IHx8IDAsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogc3RhdHMucmVjb3JkQ291bnQgfHwgMCxcbiAgICAgICAgICAgIGFzc2V0Q291bnQ6IHN0YXRzLnVuaXF1ZUFzc2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICBkYXRlUmFuZ2U6IHtcbiAgICAgICAgICAgICAgc3RhcnQ6IHN0YXRzLm1pbkRhdGUsXG4gICAgICAgICAgICAgIGVuZDogc3RhdHMubWF4RGF0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU29ydCBzY2VuYXJpb3NcbiAgICBzY2VuYXJpb3Muc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGEudHlwZSA9PT0gJ2Jhc2UnICYmIGIudHlwZSA9PT0gJ3NlbnNpdGl2aXR5JykgcmV0dXJuIC0xXG4gICAgICBpZiAoYS50eXBlID09PSAnc2Vuc2l0aXZpdHknICYmIGIudHlwZSA9PT0gJ2Jhc2UnKSByZXR1cm4gMVxuICAgICAgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSlcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzY2VuYXJpb3M6IHNjZW5hcmlvcyxcbiAgICAgIGNvdW50OiBzY2VuYXJpb3MubGVuZ3RoLFxuICAgICAgdHlwZXM6IHtcbiAgICAgICAgYmFzZTogc2NlbmFyaW9zLmZpbHRlcihzID0+IHMudHlwZSA9PT0gJ2Jhc2UnKS5sZW5ndGgsXG4gICAgICAgIHNlbnNpdGl2aXR5OiBzY2VuYXJpb3MuZmlsdGVyKHMgPT4gcy50eXBlID09PSAnc2Vuc2l0aXZpdHknKS5sZW5ndGhcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1NjZW5hcmlvcyBBUEkgZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBzY2VuYXJpb3MnLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VTY2VuYXJpb0lkKHNjZW5hcmlvSWQpIHtcbiAgLy8gUGFyc2Ugc2NlbmFyaW8gSURzIGxpa2UgXCJzZW5zaXRpdml0eV9yZXN1bHRzX2VsZWN0cmljaXR5X3ByaWNlXy01LjAwMDBcIlxuICBpZiAoIXNjZW5hcmlvSWQgfHwgIXNjZW5hcmlvSWQuc3RhcnRzV2l0aCgnc2Vuc2l0aXZpdHlfcmVzdWx0c18nKSkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBzY2VuYXJpb0lkIHx8ICdVbmtub3duIFNjZW5hcmlvJyxcbiAgICAgIHBhcmFtZXRlcjogJ3Vua25vd24nLFxuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBkZXNjcmlwdGlvbjogJ1Vua25vd24gc2NlbmFyaW8nXG4gICAgfVxuICB9XG4gIFxuICBjb25zdCBwYXJ0cyA9IHNjZW5hcmlvSWQuc3BsaXQoJ18nKVxuICBcbiAgaWYgKHBhcnRzLmxlbmd0aCA+PSA0KSB7XG4gICAgLy8gSGFuZGxlIG11bHRpLXdvcmQgcGFyYW1ldGVycyBsaWtlICdlbGVjdHJpY2l0eV9wcmljZSdcbiAgICBjb25zdCBwYXJhbVBhcnRzID0gcGFydHMuc2xpY2UoMiwgLTEpICAvLyBFdmVyeXRoaW5nIGV4Y2VwdCBwcmVmaXggYW5kIGxhc3QgdmFsdWVcbiAgICBjb25zdCB2YWx1ZVBhcnQgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXVxuICAgIFxuICAgIGNvbnN0IHBhcmFtZXRlciA9IHBhcmFtUGFydHMuam9pbignXycpXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZVBhcnQpXG4gICAgICBcbiAgICAgIGNvbnN0IHBhcmFtZXRlckRpc3BsYXlOYW1lcyA9IHtcbiAgICAgICAgJ2VsZWN0cmljaXR5X3ByaWNlJzogJ0VsZWN0cmljaXR5IFByaWNlJyxcbiAgICAgICAgJ2dyZWVuX3ByaWNlJzogJ0dyZWVuIENlcnRpZmljYXRlIFByaWNlJyxcbiAgICAgICAgJ3ZvbHVtZSc6ICdHZW5lcmF0aW9uIFZvbHVtZScsXG4gICAgICAgICdjYXBleCc6ICdDQVBFWCcsXG4gICAgICAgICdvcGV4JzogJ09QRVgnLFxuICAgICAgICAnaW50ZXJlc3RfcmF0ZSc6ICdJbnRlcmVzdCBSYXRlJyxcbiAgICAgICAgJ3Rlcm1pbmFsX3ZhbHVlJzogJ1Rlcm1pbmFsIFZhbHVlJ1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IHBhcmFtZXRlckRpc3BsYXlOYW1lc1twYXJhbWV0ZXJdIHx8IHBhcmFtZXRlci5yZXBsYWNlKC9fL2csICcgJylcbiAgICAgIFxuICAgICAgbGV0IGRlc2NyaXB0aW9uID0gYCR7ZGlzcGxheU5hbWV9IHNjZW5hcmlvYFxuICAgICAgaWYgKHZhbHVlID4gMCkge1xuICAgICAgICBkZXNjcmlwdGlvbiArPSBgICgrJHt2YWx1ZX0pYFxuICAgICAgfSBlbHNlIGlmICh2YWx1ZSA8IDApIHtcbiAgICAgICAgZGVzY3JpcHRpb24gKz0gYCAoJHt2YWx1ZX0pYFxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBgJHtkaXNwbGF5TmFtZX0gJHt2YWx1ZSA+IDAgPyAnKycgOiAnJ30ke3ZhbHVlfWAsXG4gICAgICAgIHBhcmFtZXRlcjogcGFyYW1ldGVyLFxuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvblxuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gVmFsdWUgcGFyc2luZyBmYWlsZWRcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgbmFtZTogc2NlbmFyaW9JZC5yZXBsYWNlKC9ec2Vuc2l0aXZpdHlfcmVzdWx0c18vLCAnJykucmVwbGFjZSgvXy9nLCAnICcpLFxuICAgIHBhcmFtZXRlcjogJ3Vua25vd24nLFxuICAgIHZhbHVlOiBudWxsLFxuICAgIGRlc2NyaXB0aW9uOiAnU2Vuc2l0aXZpdHkgc2NlbmFyaW8nXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY2xpZW50UHJvbWlzZSIsIkdFVCIsInJlcXVlc3QiLCJjbGllbnQiLCJkYiIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX0RCIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwidHlwZSIsImdldCIsIm1haW5Db2xsZWN0aW9uIiwiY29sbGVjdGlvbiIsInNlbnNDb2xsZWN0aW9uIiwic2NlbmFyaW9zIiwiYmFzZVNjZW5hcmlvcyIsImRpc3RpbmN0Iiwic2NlbmFyaW9JZCIsInNjZW5hcmlvU3RhdHMiLCJhZ2dyZWdhdGUiLCIkbWF0Y2giLCJzY2VuYXJpb19pZCIsIiRncm91cCIsIl9pZCIsInRvdGFsUmV2ZW51ZSIsIiRzdW0iLCJ0b3RhbENhcGV4IiwidG90YWxFcXVpdHlDYXNoRmxvdyIsInJlY29yZENvdW50IiwibWluRGF0ZSIsIiRtaW4iLCJtYXhEYXRlIiwiJG1heCIsInVuaXF1ZUFzc2V0cyIsIiRhZGRUb1NldCIsInRvQXJyYXkiLCJzdGF0cyIsInB1c2giLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJhc3NldENvdW50IiwibGVuZ3RoIiwiZGF0ZVJhbmdlIiwic3RhcnQiLCJlbmQiLCJzZW5zaXRpdml0eVNjZW5hcmlvcyIsInNjZW5hcmlvUGFyYW1zIiwicGFyc2VTY2VuYXJpb0lkIiwicGFyYW1ldGVyIiwidmFsdWUiLCJzb3J0IiwiYSIsImIiLCJsb2NhbGVDb21wYXJlIiwianNvbiIsImNvdW50IiwidHlwZXMiLCJiYXNlIiwiZmlsdGVyIiwicyIsInNlbnNpdGl2aXR5IiwiZXJyb3IiLCJjb25zb2xlIiwiZGV0YWlscyIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzdGFydHNXaXRoIiwicGFydHMiLCJzcGxpdCIsInBhcmFtUGFydHMiLCJzbGljZSIsInZhbHVlUGFydCIsImpvaW4iLCJwYXJzZUZsb2F0IiwicGFyYW1ldGVyRGlzcGxheU5hbWVzIiwiZGlzcGxheU5hbWUiLCJyZXBsYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/scenarios/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n// lib/mongodb.js\n\nconst uri = \"mongodb+srv://ProjectHalo:5apsFwxTlqN8WHQR@cluster0.quuwlhb.mongodb.net/energy_contracts?retryWrites=true&w=majority&appName=Cluster0\";\nconst options = {};\nlet client;\nlet clientPromise;\nif (false) {}\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        global._mongoClientPromise = client.connect();\n    }\n    clientPromise = global._mongoClientPromise;\n} else {}\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxpQkFBaUI7QUFDb0I7QUFFckMsTUFBTUMsTUFBTUMsdUlBQXVCO0FBQ25DLE1BQU1HLFVBQVUsQ0FBQztBQUVqQixJQUFJQztBQUNKLElBQUlDO0FBRUosSUFBSSxLQUF3QixFQUFFLEVBRTdCO0FBRUQsSUFBSUwsSUFBeUIsRUFBZTtJQUMxQywrREFBK0Q7SUFDL0QsNkVBQTZFO0lBQzdFLElBQUksQ0FBQ08sT0FBT0MsbUJBQW1CLEVBQUU7UUFDL0JKLFNBQVMsSUFBSU4sZ0RBQVdBLENBQUNDLEtBQUtJO1FBQzlCSSxPQUFPQyxtQkFBbUIsR0FBR0osT0FBT0ssT0FBTztJQUM3QztJQUNBSixnQkFBZ0JFLE9BQU9DLG1CQUFtQjtBQUM1QyxPQUFPLEVBSU47QUFFRCxpRUFBaUU7QUFDakUsOERBQThEO0FBQzlELGlFQUFlSCxhQUFhQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVuZXdhYmxlYXNzZXRzLW5leHRqcy8uL2xpYi9tb25nb2RiLmpzP2Q5MjAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL21vbmdvZGIuanNcbmltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSAnbW9uZ29kYidcblxuY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUklcbmNvbnN0IG9wdGlvbnMgPSB7fVxuXG5sZXQgY2xpZW50XG5sZXQgY2xpZW50UHJvbWlzZVxuXG5pZiAoIXByb2Nlc3MuZW52Lk1PTkdPREJfVVJJKSB7XG4gIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGFkZCB5b3VyIE1vbmdvIFVSSSB0byAuZW52LmxvY2FsJylcbn1cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gIC8vIEluIGRldmVsb3BtZW50IG1vZGUsIHVzZSBhIGdsb2JhbCB2YXJpYWJsZSBzbyB0aGF0IHRoZSB2YWx1ZVxuICAvLyBpcyBwcmVzZXJ2ZWQgYWNyb3NzIG1vZHVsZSByZWxvYWRzIGNhdXNlZCBieSBITVIgKEhvdCBNb2R1bGUgUmVwbGFjZW1lbnQpLlxuICBpZiAoIWdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlKSB7XG4gICAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwgb3B0aW9ucylcbiAgICBnbG9iYWwuX21vbmdvQ2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KClcbiAgfVxuICBjbGllbnRQcm9taXNlID0gZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2Vcbn0gZWxzZSB7XG4gIC8vIEluIHByb2R1Y3Rpb24gbW9kZSwgaXQncyBiZXN0IHRvIG5vdCB1c2UgYSBnbG9iYWwgdmFyaWFibGUuXG4gIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpXG4gIGNsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpXG59XG5cbi8vIEV4cG9ydCBhIG1vZHVsZS1zY29wZWQgTW9uZ29DbGllbnQgcHJvbWlzZS4gQnkgZG9pbmcgdGhpcyBpbiBhXG4vLyBzZXBhcmF0ZSBtb2R1bGUsIHRoZSBjbGllbnQgY2FuIGJlIHNoYXJlZCBhY3Jvc3MgZnVuY3Rpb25zLlxuZXhwb3J0IGRlZmF1bHQgY2xpZW50UHJvbWlzZSJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsInVyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIm9wdGlvbnMiLCJjbGllbnQiLCJjbGllbnRQcm9taXNlIiwiRXJyb3IiLCJnbG9iYWwiLCJfbW9uZ29DbGllbnRQcm9taXNlIiwiY29ubmVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscenarios%2Froute&page=%2Fapi%2Fscenarios%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscenarios%2Froute.js&appDir=C%3A%5CProjects%5Crenew-pyth%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CProjects%5Crenew-pyth&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();